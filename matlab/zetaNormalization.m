z=[-2.2521e+10  -1.4280e+05  -8.8314e+08  -2.7337e+10  -1.8551e+12  -9.0192e+13  -1.8902e+09  -8.2312e+12  -3.4343e+11  -4.6521e+07  -9.0995e+08  -3.1876e+04  -4.7132e+05  -3.9369e+08  -1.3143e+06  -8.8411e+05  -8.4666e+07  -2.8963e+25  -4.9616e+07  -6.5964e+02  -7.5785e+05  -1.2409e+11  -1.9133e+05  -5.1979e+09  -6.3857e+15  -5.0280e+09  -1.4850e+08  -2.5448e+08  -4.5392e+10  -3.3753e+09  -1.2585e+08  -2.7315e+12  -6.4933e+07  -8.7328e+05  -4.7650e+04  -2.9356e+04  -1.2956e+05  -9.2691e+04  -1.8851e+09  -1.0060e+10  -9.9226e+05  -6.9569e+07  -6.8569e+07  -2.8967e+07  -7.5048e+07  -6.6399e+06  -5.2828e+05  -8.6319e+02  -8.4686e+05  -2.9271e+04  -3.5524e+05  -2.4127e+05  -7.7775e+10  -1.0696e+08  -1.0708e+10  -3.7828e+09  -5.4342e+07  -2.6768e+13  -9.1528e+10  -1.7501e+09  -1.7273e+08  -7.1097e+07  -6.6169e+10  -3.0557e+07  -1.1060e+12  -4.4991e+06  -2.5003e+14  -6.0687e+08  -4.6596e+09  -3.1808e+12  -1.1163e+09  -3.1913e+10  -1.0017e+09  -6.1087e+05  -5.2782e+09  -1.9532e+16  -1.1258e+14  -8.2200e+06  -1.6384e+07  -1.1951e+06  -1.8053e+11  -3.8928e+09  -9.3330e+09  -4.7047e+11  -4.4211e+12  -1.2871e+07  -5.6677e+06  -4.6503e+13  -3.0835e+04  -5.8910e+10  -1.9238e+06  -2.0120e+12  -6.7905e+10  -2.4386e+10  -7.2350e+09  -1.5312e+13  -3.4576e+06  -5.6310e+12  -7.4429e+07  -1.7424e+10];

z=randn(1,100)-100

[v,id]=max(z)
[v,id]=min(z)

z_sort=sort(z)
z=z_sort(size(z,2)/2:end)
z_avg=mean(z)

plot(log10(abs(z-z_avg)))

z_exp=exp(z-z_avg)
denom=sum(exp(z))
z=z-denom
z=exp(z)